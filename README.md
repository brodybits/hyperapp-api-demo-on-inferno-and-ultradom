# Hyperapp API demo on Ultradom

based on <https://github.com/brodybits/hyperapp-api-demo-on-react>

from app generated by `create-react-app`

by Christopher J. Brody aka @brodybits (Chris Brody)

LICENSE: ISC OR MIT

## About

Simple counter app inspired by Hyperapp demo in <https://github.com/hyperapp/hyperapp#getting-started>

MOTIVATION:

- <https://medium.com/hyperapp/hyperapp-for-redux-refugees-2507c9dd1ddc>
- <https://github.com/hyperapp/hyperapp/issues/641> (desire to use Ultradom as a dependency), especially rejected idea in <https://github.com/hyperapp/hyperapp/issues/641#issuecomment-376445893> (remove VDOM from Hyperapp)

See also: <https://github.com/brodybits/hyperapp-api-demo-on-react>

## Build and run

First step:

    npm install

To run in browser:

    npm start

To make production build:

    npm run build

## Quick tour

Initial state and actions (inspired by Hyperapp demo app in <https://github.com/hyperapp/hyperapp#getting-started>):

```js
const initState = { count: 0 }

const actions = {
    increase: (value) => (state) => ({ count: state.count + value }),
    decrease: (value) => (state) => ({ count: state.count - value }),
}
```

Possible JSX view function (not used in this demo version):

```jsx
const myview = (state, actions) => (
    <div>
        <h1>Hyperapp API demo on Ultradom</h1>
        <button onclick={() => actions.decrease(1)}>-1</button>
        <b>{state.count}</b>
        <button onclick={() => actions.increase(1)}>+1</button>
    </div>
)
```

View using Hyperscript (<https://github.com/hyperhype/hyperscript>, see also <https://reactjs.org/docs/react-without-jsx.html> and sample at <https://github.com/jorgebucaran/ultradom#getting-started>):

```js
const myview = (state, actions) =>
    h("div", {},
        h("h1", {}, "Hyperapp API demo on Ultradom"),
        h("button", { onclick: () => actions.decrease(1) }, "-1"),
        h("b", {}, state.count),
        h("button", { onclick: () => actions.increase(1) }, "+1"),
    )
```

Note that in JSX or Hyperscript the button `onclick` property is in Camel case (`onClick`) on React but NOT on Ultradom or Hyperapp (HTML5 button has `onclick` property NOT in Camel case).

To start render on Ultradom:

```js
startViewRenderUltradom(initState, actions, myview)
```

Rendering utility function for Ultradom:

```js
function startViewRenderUltradom(initState, actions, view) {
    const myViewState = { element: null }

    const renderViewPatch = (s, a) => patch(view(s, a), myViewState.element)

    const mystore = { state: initState }

    const a2 = {}

    const myhelper = (af) => (v) => {
        mystore.state = af(v)(mystore.state)
        renderViewPatch(mystore.state, a2)
    }

    // actions.keys().map( (k) => a2[k] = myhelper(actions[k]) )
    for (let prop in actions) a2[prop] = myhelper(actions[prop])

    myViewState.element = renderViewPatch(mystore.state, a2)

    document.body.appendChild(myViewState.element)
}
```

## TODO

- rework view render code to use VDOM-specific driver functions for Ultradom, React API, React Native, etc.
- publish view render modules
- demo on codepen
- integrate with React Native
- Try on React alternatives such as Inferno, Preact, NervJS
- TodoMVC app, likely based on <https://github.com/dangvanthanh/hyperapp-todomvc>
- better styling
- try with other frameworks from <https://github.com/krausest/js-framework-benchmark>
- performance comparison with competing solutions such as using Redux
