# Hyperapp API demo on React

from app generated by `create-react-app`

by Christopher J. Brody aka @brodybits (Chris Brody)

LICENSE: ISC OR MIT

## About

Simple counter app inspired by Hyperapp demo in <https://github.com/hyperapp/hyperapp#getting-started>

MOTIVATION:

- <https://medium.com/hyperapp/hyperapp-for-redux-refugees-2507c9dd1ddc>
- <https://github.com/hyperapp/hyperapp/issues/641> (desire to use Ultradom as a dependency), especially rejected idea in <https://github.com/hyperapp/hyperapp/issues/641#issuecomment-376445893> (remove VDOM from Hyperapp)


## Build and run

First step:

    npm install

To run in browser:

    npm start

To make production build:

    npm run build

## Quick tour

Initial state, actions, and view inspired by Hyperapp demo app in <https://github.com/hyperapp/hyperapp#getting-started>:

```jsx
const initState = { count: 0 }

const actions = {
    increase: (value) => (state) => ({ count: state.count + value }),
    decrease: (value) => (state) => ({ count: state.count - value }),
}

const myview = (state, actions) => (
    <div>
        <h1>Hyperapp API demo on React</h1>
        <button onClick={() => actions.decrease(1)}>-1</button>
        <b>{state.count}</b>
        <button onClick={() => actions.increase(1)}>+1</button>
    </div>
)
```

View without JSX, using Hyperscript (<https://github.com/hyperhype/hyperscript>, see also <https://reactjs.org/docs/react-without-jsx.html> and sample at <https://github.com/jorgebucaran/ultradom#getting-started>):

```js
const h = React.createElement

const myview = (state, actions) =>
    h("div", {},
        h("h1", {}, "Hyperapp API demo on React"),
        h("button", { onClick: () => actions.decrease(1) }, "-1"),
        h("b", {}, state.count),
        h("button", { onClick: () => actions.increase(1) }, "+1"),
    )
```

To start render on React:

```js
startViewRenderReactDOM(initState, actions, myview, document.getElementById('root'))
```

Rendering utility function for React DOM (to be extracted into a package someday):

```js
function startViewRenderReactDOM(initState, actions, myview, elem) {
    const render = (s, a) => ReactDOM.render(myview(s, a), elem)

    const mystore = { state: initState }

    const a2 = {}

    const myhelper = (af) => (v) => {
        mystore.state = af(v)(mystore.state)
        render(mystore.state, a2)
    }

    // actions.keys().map( (k) => a2[k] = myhelper(actions[k]) )
    for (let prop in actions) a2[prop] = myhelper(actions[prop])

    render(mystore.state, a2)
}
```

## TODO

- demo on codepen
- Ultradom version
- code to render on React in reusable module
- integrate with React Native
- Try on React alternatives such as Inferno, Preact, NervJS
- TodoMVC app, likely based on <https://github.com/dangvanthanh/hyperapp-todomvc>
- better styling
- try with other frameworks from <https://github.com/krausest/js-framework-benchmark>
- performance comparison with competing solutions such as using Redux
